{%- liquid 
    assign sid = section.id
    assign se_stts = section.settings
    assign se_height = se_stts.se_height
    assign video_url = se_stts.video_url | default:"https://www.youtube.com/watch?v=_9VUPq3SxOc" 
    assign url_none = "//www.youtube.com/embed/https://www.youtube.com/watch?v=_9VUPq3SxOc?autoplay=1&mute=1&start=5&showinfo=0&controls=0&modestbranding=1&loop=1&rel=0&autohide=1&enablejsapi=1&playlist=https://www.youtube.com/watch?v=_9VUPq3SxOc"

    assign urltest = "https://www.youtube.com/embed?v=-2icZZ9tbwc?autoplay=1"

   
    -%}


  <div class="sk-collection-top" style="margin-bottom: 100px;">
    <div class="row equal_nt auto al_center"></div>
      <div class="mobile-remove-left-padding col-md-6 txt_col_img" style="max-width: 100%; padding-right: 0">
        <div class="container best-seller-img-container sk-session-slider-container">
        {%- comment -%} <div class="sk-best-seller-img-slider sk-session-slider products dot_owl_{{se_stts.dot_owl}} dot_color_{{se_stts.dot_color}} row row_pr_{{inc_pr}} round_cd_{{se_stts.round_cd}} nt_slider {{se_stts.image_size}} {{se_stts.image_ratio}} position_{{se_stts.image_position}} space_{{se_stts.space}}">{%- endcomment -%} 
            <div class="nt_cats_holder row fl_center equal_nt nt_slider js_carousel prev_next_1 btn_owl_2 cat_space_0 btn_vi_1" data-flickityt4s-js='{"imagesLoaded": false, "adaptiveHeight": false, "contain": false, "groupCells": "100%", "dragThreshold" : 5, "cellAlign": "left","wrapAround": false,"prevNextButtons": true,"percentPosition": true, "autoPlay" : {{ 6 | times: 1000 }}, "pauseAutoPlayOnHover" : true, "rightToLeft": {{settings.use_rtl}} }'>
          
              <div class="cat_grid_item__overlay item__position nt_bg_lz lazyloadt4s" data-bgset="{{ block.settings.sessions_indiv_image | img_url: '1x1' }}" data-ratio="{{block.settings.sessions_indiv_image.aspect_ratio}}" data-sizes="auto" data-parent-fit="width" style="padding-bottom: 100%">



            {%- for block in section.blocks -%}
            
            {%- liquid 
              assign bk_stts = block.settings
              assign video_id = block.settings.video_url | remove: "https://youtu.be/"
              assign url = bk_stts.video_url | remove: "https://youtu.be/" | prepend: video_id | prepend: "https://www.youtube.com/embed/" | append: "?autoplay=1&mute=1&start=5&showinfo=0&controls=0&modestbranding=1&loop=1&rel=0&autohide=1&enablejsapi=1&playlist=" | append: video_id
               -%}
            <div class="sendero-session-slider-vid-container">
                <iframe width="100%" height="100%" src="{{url}}" title="YouTube video player" frameborder="0" allow="loop; accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>     
                </iframe>  
                  <a class="sendero-session-link" href="{{bk_stts.page_link}}">
                    <div class="sendero-session-overlay">
                      <h5 class="sendero-session-sub-title">{{bk_stts.video_location}}</h5>
                      <h3 class="sendero-session-title">{{bk_stts.video_title}}</h3>
                    </div>
                  </a>
                 
            </div>
              {%- endfor -%}

            </div>
          </div>
          <button class="flickityt4s-button flickityt4s-prev-next-button previous" id="previous_button" type="button" aria-label="Previous" style="z-index: 301; opacity: 1; transform:scale(1); left: 40px; border-radius: 0">
            <svg class="flickityt4s-button-icon" viewBox="0 0 100 100">
                <path d="M 10,50 L 60,100 L 70,90 L 30,50  L 70,10 L 60,0 Z" class="arrow" transform="translate(100, 100) rotate(180)"></path>
            </svg>
        </button>
        <button class="flickityt4s-button flickityt4s-prev-next-button next" id="next_button" type="button" aria-label="Next" style="z-index: 301; opacity: 1;transform: rotate(180deg) scale(1); border-radius: 0">
            <svg class="flickityt4s-button-icon" viewBox="0 0 100 100" >
                <path d="M 10,50 L 60,100 L 70,90 L 30,50  L 70,10 L 60,0 Z" class="arrow"></path>
            </svg>
        </button>
        </div>
      </div>
    </div>



  {%- render 'section_css' -%}

  <script>
    // let slides_num = document.querySelector(".sk-session-slider").children.length;
    // let current_slide = 1;
    // let scroll_length = 0;
    // let next_button = document.getElementById("next_button");
    // let prev_button = document.getElementById("previous_button");
    // let slider = document.getElementsByClassName("sk-session-slider")[0];
    // let slider_length = slider.scrollWidth;
    // let place = 0;
    // let window_width = window.innerWidth;
    // let offset = 50;
    // let slide_length = 600;
    // if (window_width < 768) {
    //   offset = 25;
    //   slide_length = 400;
    // }

    // window.addEventListener("resize", () => {
    //   window_width = window.innerWidth;
    // });

    // next_button.addEventListener("click", () => {
    //   if (current_slide === slides_num) {
    //     slider.style.transform="translateX(0%)";
    //     current_slide = 1;
    //   } else {
    //     scroll_length = slide_length * current_slide;
    //     if (scroll_length > slider_length - window_width) {
    //       slider.style.transform="translateX(-" + (slider_length - window_width + offset) + "px)";
    //       current_slide = slides_num;
    //     } else {
    //       slider.style.transform="translateX(-" + scroll_length + "px)";
    //       current_slide++;
    //     }
    //   }
    // });

    // prev_button.addEventListener("click", () => {
    //   console.log(current_slide);
    //   if (current_slide === 1) {
    //     slider.style.transform="translateX(-" + (slider_length - window_width + offset) + "px)";
    //     current_slide = slides_num - 1;
    //   } else if (current_slide === 2) {
    //     slider.style.transform="translateX(0%)";
    //     current_slide = 1;
    //   } else {
    //     scroll_length = slide_length * (current_slide - 1);
    //     slider.style.transform="translateX(-" + (scroll_length) + "px)";
    //     current_slide--;
    //   }
    // });
  </script>

  {%- schema -%}
    {
      "name": "Sessions-slider",
      "class": "nt_section type_carousel type_featured_collection_owl tp_se_cdt",
      "settings": [
        {
          "type": "header",
          "content": "== General Settings"
        },
        {
          "type": "text",
          "id": "mg",
          "label": "Margin",
          "placeholder": ",,,,"
        },
        {
          "type": "text",
          "id": "pd",
          "label": "Padding",
          "placeholder": ",,,,"
        },
       {
          "type": "header",
          "content": "== Design Mobile Options"
        },
        {
          "type": "text",
          "id": "mg_mb",
          "label": "Margin",
          "placeholder": "50px,,50px,"
        },
        {
          "type": "text",
          "id": "pd_mb",
          "label": "Padding",
          "placeholder": "50px,,50px,"
        }
      ],
      "blocks": [
        {
          "type": "1",
          "name": "Slider Video Item",
          "settings": [
            {
              "id": "video_url",
              "type": "video_url",
              "label": "Video URL",
              "accept": ["youtube"],
              "default": "https://www.youtube.com/watch?v=_9VUPq3SxOc",
              "info": "To remove video block, insert url: https://www.youtube.com/watch?v=_9VUPq3SxOc"
            },
            {
              "id": "page_link",
              "type": "page",
              "label": "Page link"
            },
            {
              "type": "text",
              "id": "video_title",
              "label": "Video Title",
              "info": "Title of video"
            },
            {
              "type": "text",
              "id": "video_location",
              "label": "Video Location",
              "info": "Location of video"
            }
          ]
        }  
      ]
    }
  {% endschema %}
  